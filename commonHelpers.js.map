{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport { galleryImg, htmlListOfGallery, createMarkup };\nimport { galleryImg } from \"../main.js\";\n\nlet htmlListOfGallery = \"\";\n\n// експортуємо створену функцію createMarkup щоб можна було її вставити в pixabay.js\nfunction createMarkup(data) {\n  console.log(data.hits.length);\n  // обнуляємо розмітку сторінки якщо там є якісь попередні дані\n  galleryImg.innerHTML = null;\n  // відмальовка розмітки з картинками, \n  // де data - сам об'єкт, \n  // hits - масив у ньому який містить потрібні дані\n  // largeImageUrl, tags, likes - потрібні дані\n  data.hits.forEach(hit => {\n    htmlListOfGallery += `<li class=\"gallery-item\">\n         <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n         <img class=\"gallery-image\"\n                src=\"${hit.webformatURL}\"\n                alt=\"${hit.tags}\"/> </a>\n        <ul class=\"stat\">\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Likes</h2>\n           <p class=\"stat-value\">${hit.likes}</p>\n          </li>\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Views</h2>\n           <p class=\"stat-value\">${hit.views}</p>\n          </li>\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Comments</h2>\n           <p class=\"stat-value\">${hit.comments}</p>\n          </li>\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Downloads</h2>\n           <p class=\"stat-value\">${hit.downloads}</p>\n          </li>\n        </ul>\n        </li>`\n  });\n\n  // відмальовуємо за раз все що сформували\n  galleryImg.insertAdjacentHTML(\"beforeend\", htmlListOfGallery);\n  console.log(htmlListOfGallery);\n  \n  lightbox.refresh();\n  \n}\n\n// відкривашка великих красивих картинок\n  const lightbox = new SimpleLightbox('.gallery-item a', {\n            captionsData: \"alt\",\n            captionPosition: \"bottom\",\n            captionDelay: 250,\n  });\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n// імпортуємо функцію createMarkup з файла render-functions.js\nimport { galleryImg, createMarkup } from \"./render-functions.js\";\nimport { ourForm} from \"../main.js\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\nconst paramPixabay = {\n    key: \"42515741-a33332df4257bc0cfcc74fb38\",\n    image_type : \"photo\",\n    orientation : \"horizontal\",\n    safesearch: true,\n    per_page: 3,\n}\n\nexport async function getData(query, page) {\n    try {\n        console.log(`${query} + ${page}`);\n      await axios.get(`?key=${paramPixabay.key}&q=${query}&image_type=${paramPixabay.image_type}&orientation=${paramPixabay.orientation}&safesearch=${paramPixabay.safesearch}&per_page=${paramPixabay.per_page}&page=${page}`)\n        .then( resp => {\n               if (!resp.statusText === \"Ok\") {\n                throw new Error(resp.status);\n               } else if (resp.data.hits.length === 0) {\n                    galleryImg.innerHTML = \"\";\n                    iziToast.error({\n                    title: 'Error',\n                    message: `Sorry, there are no images matching your search query. Please try again!`,\n                    messageColor: 'white',\n                    messageSize: '16',\n                    backgroundColor: 'red',\n                    theme: 'dark',\n                    position: 'topRight',\n                    });\n                   return;\n               } else {\n                   createMarkup(resp.data);\n                      }\n          })\n        .catch(error => {\n                // ловимо помилки\n                return iziToast.error({\n                title: 'Error',\n                message: `${error}`,\n                messageColor: 'white',\n                messageSize: '16',\n                backgroundColor: 'red',\n                theme: 'dark',\n                position: 'topRight',\n                });\n            })\n        .finally(() => {\n        // в будь-якому варіанті обнуляємо поле інпут від старого запиту\n            ourForm.reset();\n            });\n    //   console.log(response);\n      \n  } catch (error) {\n    console.error(error);\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getData } from \"./js/pixabay-api.js\";\n\nconst ourForm = document.querySelector(\".form\");\nconst buttonSearch = document.querySelector(\".button-search\");\nconst loader = document.querySelector(\".loader\");\nconst buttonLoadMore = document.querySelector(\".button-load-more\");\nconst galleryImg = document.querySelector(\".gallery\");\n\nconst query = \"\";\nconst page = 1;\nlet current_page;\nlet current_query;\n\n// підслуховувач на відправку\nourForm.addEventListener(\"submit\", getPhoto);\n\n// функція яка виконується в підслуховувачі\nfunction getPhoto(event) {\n    // забороняємо браузеру виконувати стандартні сценарії\n    event.preventDefault();\n    // зчитуємо які дані ввели в поле інпут\n    const query = event.target.elements.search.value.trim();\n\n    // перевірка на порожнє поле\n    if (!query) {\n        iziToast.warning({\n                title: \"Look at me\",\n                message: `Ви не ввели що треба шукати`,\n                messageColor: 'black',\n                messageSize: '16',\n                backgroundColor: 'orange',\n                theme: 'dark',\n                position: 'topRight',\n        });\n        return;\n    } \n\n    buttonSearch.disabled = false;\n    getData(query, page);\n\n    current_query = query;\n    current_page = page;\n    buttonLoadMore.classList.remove('is-hidden');\n};\n\nbuttonLoadMore.addEventListener('click', loadMorePictures);\n\nfunction loadMorePictures() {\n    loader.classList.remove('is-hidden');\n    current_page++;\n    getData(current_query, current_page);\n    loader.scrollIntoView();\n    loader.classList.add(\"is-hidden\");\n\n}\n\nexport { ourForm, query, page, galleryImg};"],"names":["htmlListOfGallery","createMarkup","data","galleryImg","hit","lightbox","SimpleLightbox","axios","paramPixabay","getData","query","page","resp","iziToast","error","ourForm","buttonSearch","loader","buttonLoadMore","current_page","current_query","getPhoto","event","loadMorePictures"],"mappings":"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"}